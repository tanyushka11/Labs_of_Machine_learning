# Работа с временным рядом

#### Данные: цены на момент закрытия на акции компании 2223.SR
## Загрузка данных
![image](https://user-images.githubusercontent.com/114190495/235471478-3f0adc51-04da-44cf-8125-fbef912d40a9.png)
### Оставим данные только о дате и цене на момент закрытия
![image](https://user-images.githubusercontent.com/114190495/235471557-3a85c241-0e39-4ce0-ad2e-3cc54143822a.png)
### Строим график временного ряда
![image](https://user-images.githubusercontent.com/114190495/235471793-809fe9c3-d555-4b02-9b4e-5f9ae728b4ce.png)

По графику нельзя точно сказать стоило или нет вкладыватся в акции компании. Видно,что ряд не стационарен. В нём можно выразить трендовую зависимость.
График показывает, что цены на акции в основном исправно с периодичными колебаниями росли в течении 4х месяцев. Можно заметить, что существует большое количество короткосрочных колебаний цен, которые не подчиняются общему тренду и вызваны внешними факторами.
### Тест Дикки-Фуллера на стационарность
Проверим на уровне значимости 0.05
![image](https://user-images.githubusercontent.com/114190495/235471922-3ad7f768-4823-4891-b1b1-9c3c4837b537.png)
![image](https://user-images.githubusercontent.com/114190495/235472000-60d83c85-ce08-460a-8263-b4575bee2635.png)
![image](https://user-images.githubusercontent.com/114190495/235472071-94656f1b-7aed-4df4-9eb0-81ffcae7425d.png)

На основании теста Dickey-Fuller, можно сделать вывод о том, что временной ряд не является стационарным. Это подтверждается большим значением p-value, превышающим уровень значимости 0.05, а также недостаточным значением тестовой статистики для отклонения от нулевой гипотезы о нестационарности ряда.
### Методология Бокса-Дженкинса
![image](https://user-images.githubusercontent.com/114190495/235472167-35d8e0cf-75f6-4e8d-88c3-4f3a2ab8aeb2.png)
![image](https://user-images.githubusercontent.com/114190495/235472233-bb4d8714-3779-4dd6-9bf8-0c0a1b451245.png)
![image](https://user-images.githubusercontent.com/114190495/235472323-48359fb7-0fac-41ef-99b9-0006d7e3f62e.png)
![image](https://user-images.githubusercontent.com/114190495/235472401-d0dcf368-87ad-48e8-85df-44de4aed83a6.png)

Результаты построение PACF и ACF не удовлетворительны. Сложно определить примерные значения p,q для построения ARIMA-модели. Предлагается для начала избавится от трендовой зависимости
### Удалениe линейной трендовой составляющей из временного ряда
![image](https://user-images.githubusercontent.com/114190495/235472685-d7b7d70b-5bed-457a-ad83-ad78e38b533d.png)

## Тест Дикки-Фуллера без тренда
![image](https://user-images.githubusercontent.com/114190495/235472804-72ed64ac-61c4-4d37-981f-049cf0bcb351.png)

## Разделим данные
Таким образом на преобразованных данных можно построить модель ARIMA(5,0,9)
Таким образом на исходных данных можно построить модель ARIMA(5,0,6). Даёт лучшие результаты
### Проверим модель на тестовой выборке
![image](https://user-images.githubusercontent.com/114190495/235472991-61a16f3d-1893-4792-91b4-8ceca954f374.png)

## Построим прогноз
![image](https://user-images.githubusercontent.com/114190495/235473128-cbd3e976-f641-4dee-93d2-a256ce9b6c39.png)

Исходя из анализа графика, можно сделать вывод, что в будущем цены на акции компании скорее всего не будут повышаться.
## Построение моделей для прогноза по разным периодам
### Требуется разделить исходные данные на 3 блока Предлагается взять такие интервалы:
![image](https://user-images.githubusercontent.com/114190495/235473297-4a7ccbe7-392e-42fc-82b4-38581afcccd5.png)

1. 2023-01-01 - 2023-02-01

2. 2023-02-01 - 2023-03-15

3. 2023-03-15 - н.в.
![image](https://user-images.githubusercontent.com/114190495/235473488-94a0fc60-9db5-494a-bd14-dfc758dcf7e1.png)
![image](https://user-images.githubusercontent.com/114190495/235473637-8d2970f6-c58d-46e2-a749-c30c16fd4f36.png)
![image](https://user-images.githubusercontent.com/114190495/235473717-0ad76971-1acb-4390-b737-cb95201026c5.png)

Из результатов моделирования видно, что лучшая модель на первом блоке данных имеет порядок (3,0,8) и достигает MSE на тренировочной выборке в размере 0.264, а на тестовой - 0.0598. Лучшая модель на втором блоке данных имеет порядок (4,0,9) и достигает MSE на тренировочной выборке в размере 0.6535, а на тестовой - 0.131. Лучшая модель на третьем блоке данных имеет порядок (4,0,9) и достигает MSE на тренировочной выборке в размере 0.5458, а на тестовой - 0.527.

Модель с наименьшим значением MSE на тестовой выборке является наиболее предпочтительной для прогнозирования будущих значений. Следовательно, на основе результатов моделирования можно сделать вывод, что наиболее точная модель на тестовой выборке была построена на первом блоке данных и имеет порядок (3,0,8).
